---
description: |
  Generate an architecture overview of the project.
  Produces a high-level map of components, their responsibilities, and relationships.
  Use to understand the big picture before diving into details.
allowed-tools:
  - Read
  - Glob
  - Grep
  - Task
hooks:
  - event: Stop
    once: true
    command: |
      echo ""
      echo "Architecture overview complete."
      echo "  - /onboard:explore <component> to dive into specific areas"
---

# Architecture Overview

Generate a high-level architecture map of this project.

## Phase 1: Discovery

<exploration>
Use the Task tool with `subagent_type: "Explore"` to investigate:

1. **Layers** - What are the main layers? (UI, API, services, data)
2. **Components** - Major modules or packages
3. **Boundaries** - How are components separated? (folders, packages, services)
4. **Communication** - How do components talk to each other?
5. **External dependencies** - Third-party services, databases, APIs
6. **Configuration** - How is the system configured?
</exploration>

## Phase 2: Generate Architecture Map

<output_format>
```markdown
# Architecture Overview

## System Type
[Monolith | Modular Monolith | Microservices | Serverless | etc.]

## High-Level Diagram (ASCII)

```
┌─────────────────────────────────────────┐
│                 Client                   │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│               API Layer                  │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│  │ Routes  │ │  Auth   │ │  ...    │   │
│  └─────────┘ └─────────┘ └─────────┘   │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│            Service Layer                 │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│             Data Layer                   │
└─────────────────────────────────────────┘
```

## Component Breakdown

### [Component 1]
- **Location**: `path/to/component/`
- **Responsibility**: What it does
- **Key files**: `file1.py`, `file2.py`
- **Depends on**: [Other components]
- **Depended by**: [Components that use this]

### [Component 2]
...

## Data Flow

### [Flow 1: User Authentication]
1. Request arrives at `routes/auth.py:login`
2. Validated by `services/auth.py:authenticate`
3. Token generated by `utils/jwt.py:create_token`
4. Response sent

### [Flow 2: ...]
...

## External Dependencies

| Service | Purpose | Config Location |
|---------|---------|-----------------|
| PostgreSQL | Primary database | `config/database.py` |
| Redis | Caching | `config/cache.py` |

## Key Patterns Used

| Pattern | Where Used | Example |
|---------|------------|---------|
| Repository | Data access | `repositories/user.py` |
| Service Layer | Business logic | `services/` |

## Areas of Complexity
- [Area 1]: Why it's complex, where to look
- [Area 2]: Why it's complex, where to look
```
</output_format>

<critical_rules>
<rule priority="blocking">
Base the diagram on actual code structure, not assumptions.
</rule>

<rule priority="blocking">
Include specific file paths for each component.
</rule>

<rule priority="recommended">
Highlight areas that are unusually complex or might confuse newcomers.
</rule>
</critical_rules>
